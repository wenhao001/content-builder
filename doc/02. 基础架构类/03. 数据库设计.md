## 数据库设计

### 1. 核心表结构

#### materials (素材表)

| 字段名      | 类型         | 描述                             |
| ----------- | ------------ | -------------------------------- |
| id          | BIGINT       | 主键                             |
| type        | VARCHAR(50)  | 素材类型(image/text/video/audio) |
| url         | VARCHAR(255) | 存储路径                         |
| size        | BIGINT       | 文件大小(字节)                   |
| upload_time | DATETIME     | 上传时间                         |
| status      | TINYINT      | 状态(0-待处理/1-已处理/2-异常)   |

#### generated_contents (生成内容表)

| 字段名      | 类型     | 描述                           |
| ----------- | -------- | ------------------------------ |
| id          | BIGINT   | 主键                           |
| material_id | BIGINT   | 关联素材 ID                    |
| content     | TEXT     | 生成内容(富文本)               |
| status      | TINYINT  | 状态(0-初稿/1-已编辑/2-已发布) |
| created_at  | DATETIME | 创建时间                       |
| updated_at  | DATETIME | 更新时间                       |

#### publish_records (发布记录表)

| 字段名       | 类型        | 描述                                  |
| ------------ | ----------- | ------------------------------------- |
| id           | BIGINT      | 主键                                  |
| content_id   | BIGINT      | 关联内容 ID                           |
| channel      | VARCHAR(50) | 发布渠道                              |
| status       | TINYINT     | 状态(0-待发布/1-发布中/2-成功/3-失败) |
| publish_time | DATETIME    | 发布时间                              |
| result       | TEXT        | 发布结果详情                          |

### 2. 索引策略

- 联合索引：materials(type, status) - 加速素材类型+状态查询
- 联合索引：generated_contents(material_id, status) - 优化内容生成状态查询
- 联合索引：publish_records(content_id, channel) - 支持按内容+渠道查询发布记录

### 3. 数据关系

- 一对多：一个素材(material)可对应多个生成内容(generated_content)
- 一对多：一个生成内容可对应多条发布记录(publish_record)
