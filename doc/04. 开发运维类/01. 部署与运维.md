## 部署与运维

### 1. 环境配置

- **开发环境**：本地 Docker 容器，单节点部署
- **测试环境**：轻量级 K8s 集群，模拟生产配置
- **生产环境**：多节点 K8s 集群，高可用部署

### 2. CI/CD 流程

- **代码管理**：GitLab 仓库，分支策略采用 Git Flow
- **自动化构建**：
  - 提交触发自动构建测试
  - Docker 镜像版本化管理
  - 代码质量门禁检查
- **部署流程**：
  1. 开发分支 → 测试环境自动部署
  2. 主分支 → 预发布环境手动审批
  3. 发布分支 → 生产环境灰度发布

### 3. 资源配置策略

- **弹性伸缩**：基于 CPU/内存使用率的 HPA 自动扩缩容
- **资源限制**：
  - 前端容器：1 核 CPU，512MB 内存
  - 后端容器：2 核 CPU，2GB 内存
  - 数据库容器：4 核 CPU，8GB 内存
- **存储配置**：生产环境采用云存储服务，支持动态扩容

### 4. 发布策略

- **蓝绿部署**：维护两套相同环境，切换流量实现零停机更新
- **灰度放量**：按比例逐步切换用户流量，监控异常及时回滚
- **回滚机制**：保留最近 3 个版本镜像，支持一键回滚
