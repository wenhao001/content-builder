## 监控与可观测性

### 1. 系统监控

- **关键指标**：
  - 响应时间：API 平均响应时间<500ms，P95<1s
  - 错误率：API 错误率<0.1%，大模型调用成功率>99%
  - 资源使用率：CPU<70%，内存<80%，磁盘空间<85%
- **监控工具**：Prometheus 采集指标，Grafana 可视化
- **告警策略**：
  - 一级告警：服务不可用、错误率突增>1%，即时通知
  - 二级告警：响应时间延长、资源使用率高，15 分钟内通知
  - 三级告警：非关键指标异常，工作时间内通知

### 2. 日志管理

- **日志规范**：
  - 格式：JSON 结构化日志，包含 timestamp、level、traceId 等字段
  - 级别：ERROR(错误)、WARN(警告)、INFO(信息)、DEBUG(调试)
  - 内容：关键操作记录、异常堆栈、用户行为审计
- **收集方案**：ELK 栈(Elasticsearch+Logstash+Kibana)
- **日志保留**：线上环境 30 天，开发测试环境 7 天

### 3. 链路追踪

- **实现方案**：SkyWalking 分布式链路追踪
- **追踪范围**：
  - 前端请求到后端响应全链路
  - 大模型 API 调用过程
  - 数据库操作与缓存访问
- **关键指标**：
  - 调用链耗时分布
  - 服务依赖关系图
  - 异常链路占比

### 4. 业务监控

- **核心业务指标**：
  - 素材上传量：日活用户数、上传文件数
  - 内容生成量：生成成功率、平均耗时
  - 发布情况：各渠道发布成功率、平均发布耗时
- **监控看板**：实时展示业务运行状态，支持趋势分析
